import{_ as R,r as v,o as Q,a as H,u as F,b as W,c as N,d as B,e as r,f as w,g as E,h as a,i as e,w as s,j as p,k as $,l as y,m as U,F as K,E as j,p as O,n as D,q as Z,s as A,t as G,v as T}from"./index-f277ba8f.js";import{m as J}from"./md5-805f51e0.js";const ee=""+new URL("bg-img-63c403eb.png",import.meta.url).href,oe=()=>(l,t,o)=>{t.length===0?o(new Error("请输入密码")):t.length<6?o(new Error("密码不能少于6位")):o()},te=()=>(l,t,o)=>{t.length===0?o(new Error("请输入验证码")):t.length<2?o(new Error("验证码不能少于2位")):o()},se=()=>(l,t,o)=>{t.length===0?o(new Error("请输入手机号")):/^1[3-9]\d{9}$/.test(t)?o():o(new Error("手机号码格式不正确"))},ne=()=>(l,t,o)=>{t.length===0?o(new Error("请输入验证码")):t.length!==6?o(new Error("短信验证码格式不正确")):o()};const ae=l=>(O("data-v-e036d26b"),l=l(),D(),l),re={class:"testAccount"},le={class:"tipBox"},ie={class:"tipIcon"},de={class:"loginFrom"},ce={class:"showPassword"},ue={class:"code-box"},_e=["innerHTML"],me={class:"rememberMe"},pe=ae(()=>a("a",{href:""},"忘记密码?",-1)),ge={__name:"index",setup(l){const t=v(!0),o=v("");Q(async()=>{await d(),_(t.value)});const _=u=>{u?(n.username="supAdmin@gmail.com",n.password="demo1234",n.captcha_code=o.value):(n.username="",n.password="",n.captcha_code="")},n=H({username:"",password:"",captcha_code:"",code_key:""}),b=v({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",validator:oe()}],captcha_code:[{required:!0,trigger:"blur",validator:te()}]}),i=v("password"),x=()=>{i.value==="password"?i.value="text":i.value="password"},h=v(),g=F(),C=W(),f=N(()=>o.value.split("").map(u=>`<span style="color: ${z()}">${u}</span>`).join("")),z=()=>{const u=["#9ec7fd","#ea766d","#a4da94","#ff938b","#1d2940"];return u[Math.floor(Math.random()*u.length)]},m=()=>{h.value.validate(async u=>{if(g.commit("user/setLoadingState",!0),!u)return;if(n.captcha_code.toLowerCase()!==o.value.toLowerCase()){j.error("验证码错误！"),d();return}const c={username:n.username,password:J(n.password),captcha_code:n.captcha_code,code_key:n.code_key};await g.dispatch("user/login",c),C.push("/"),g.commit("user/setLoadingState",!1)})},d=async()=>{const[u,c]=await B.getCode();o.value=c.data.code,n.code_key=c.data.code_key,t.value&&(n.captcha_code=o.value)};return(u,c)=>{const k=r("svg-icon"),I=r("el-descriptions-item"),q=r("el-descriptions"),L=r("el-input"),V=r("el-form-item"),P=r("el-checkbox"),S=r("el-button"),Y=r("el-form");return w(),E(K,null,[a("div",re,[a("div",le,[a("div",ie,[e(k,{class:"icon",icon:"tipicon"})]),e(q,{column:1},{default:s(()=>[e(I,{label:"SupAdmin 账号:"},{default:s(()=>[p("supAdmin@gmail.com")]),_:1}),e(I,{label:"Admin 账号:"},{default:s(()=>[p("admin@gmail.com")]),_:1}),e(I,{label:"User 账号:"},{default:s(()=>[p("user1@gmail.com")]),_:1}),e(I,{label:"密码:"},{default:s(()=>[p("demo1234")]),_:1})]),_:1})])]),a("div",de,[e(Y,{ref_key:"loginFromRef",ref:h,style:{"max-width":"600px"},model:n,rules:b.value},{default:s(()=>[e(V,{prop:"username"},{default:s(()=>[e(L,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.username,"onUpdate:modelValue":c[0]||(c[0]=M=>n.username=M),name:"username",placeholder:"账号",type:"text",onKeyup:$(m,["enter","native"])},null,8,["modelValue"])]),_:1}),e(V,{prop:"password","label-suffix":""},{default:s(()=>[e(L,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.password,"onUpdate:modelValue":c[1]||(c[1]=M=>n.password=M),name:"password",placeholder:"密码",type:i.value,onKeyup:$(m,["enter","native"])},null,8,["modelValue","type"]),a("span",ce,[e(k,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:x},null,8,["icon"])])]),_:1}),e(V,{trim:"",prop:"captcha_code"},{default:s(()=>[a("div",ue,[e(L,{size:"large",style:{width:"100%","border-radius":"8px"},placeholder:"验证码",modelValue:n.captcha_code,"onUpdate:modelValue":c[2]||(c[2]=M=>n.captcha_code=M),name:"captcha_code",class:"code-input",maxlength:"2",onKeyup:$(m,["enter","native"])},null,8,["modelValue"]),a("div",{class:"code-img",onClick:d,innerHTML:f.value},null,8,_e)])]),_:1}),a("div",me,[e(V,null,{default:s(()=>[e(P,{modelValue:t.value,"onUpdate:modelValue":c[3]||(c[3]=M=>t.value=M),onChange:_},{default:s(()=>[p("记住我")]),_:1},8,["modelValue"])]),_:1}),e(V,null,{default:s(()=>[pe]),_:1})]),e(V,null,{default:s(()=>[e(S,{loading:y(g).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:U(m,["prevent"])},{default:s(()=>[p(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])],64)}}},fe=R(ge,[["__scopeId","data-v-e036d26b"]]),ve=()=>(l,t,o)=>{t.length===0?o(new Error("请输入密码")):t.length<6?o(new Error("密码不能少于6位")):o()},he=l=>(t,o,_)=>{o===""?_(new Error("请再次输入密码")):o!==l.password?_(new Error("两次输入的密码不一致")):_()},we=()=>(l,t,o)=>{t.length===0?o(new Error("请输入验证码")):t.length<2?o(new Error("验证码不能少于2位")):o()};const X=l=>(O("data-v-a9a3d0e3"),l=l(),D(),l),ye={class:"showPassword"},be={class:"showPassword"},xe={class:"code-box"},Ce=["innerHTML"],ke={class:"registrationTerms"},Ve=X(()=>a("span",null,"注册即我同意",-1)),Le=X(()=>a("span",null,"&",-1)),Se={__name:"index",setup(l){const t=v("");Q(()=>{f()});const o=N(()=>t.value.split("").map(m=>`<span style="color: ${_()}">${m}</span>`).join("")),_=()=>{const m=["#9ec7fd","#ea766d","#a4da94","#ff938b","#1d2940"];return m[Math.floor(Math.random()*m.length)]},n=H({username:"",password:"",confirmPassword:"",captcha_code:""}),b=v({username:[{required:!0,trigger:"blur",message:"请填写账号"}],password:[{required:!0,trigger:"blur",validator:ve()}],confirmPassword:[{required:!0,trigger:"blur",validator:he(n)}],captcha_code:[{required:!0,trigger:"blur",validator:we()}]}),i=v("password"),x=()=>{i.value==="password"?i.value="text":i.value="password"},h=v(),g=F(),C=()=>{h.value.validate(async m=>{if(!m)return;if(n.captcha_code.toLowerCase()!=t.value.toLowerCase()){f(),j.error("验证码错误！"),g.commit("user/setLoadingState",!1);return}g.commit("user/setLoadingState",!0);const d={...n,password:J(n.password)};g.commit("user/setLoadingState",!0);const[u,c]=await B.userRegister(d);u?(console.log(u),f(),g.commit("user/setLoadingState",!1)):(g.commit("user/setActiveState","login"),g.commit("user/setLoadingState",!1))})},f=async()=>{const[m,d]=await B.getCode();t.value=d.data.code},z=()=>{g.commit("user/setActiveState","login")};return(m,d)=>{const u=r("el-input"),c=r("el-form-item"),k=r("svg-icon"),I=r("el-button"),q=r("el-form"),L=r("router-link"),V=r("ArrowLeft"),P=r("el-icon");return w(),E(K,null,[e(q,{ref_key:"registerFromRef",ref:h,style:{"max-width":"600px"},model:n,rules:b.value},{default:s(()=>[e(c,{prop:"username"},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.username,"onUpdate:modelValue":d[0]||(d[0]=S=>n.username=S),name:"username",placeholder:"账号",type:"text",onKeyup:$(C,["enter","native"])},null,8,["modelValue"])]),_:1}),e(c,{prop:"password","label-suffix":""},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.password,"onUpdate:modelValue":d[1]||(d[1]=S=>n.password=S),name:"password",placeholder:"密码",type:i.value,onKeyup:$(C,["enter","native"])},null,8,["modelValue","type"]),a("span",ye,[e(k,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:x},null,8,["icon"])])]),_:1}),e(c,{prop:"confirmPassword","label-suffix":""},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.confirmPassword,"onUpdate:modelValue":d[2]||(d[2]=S=>n.confirmPassword=S),name:"confirmPassword",placeholder:"确认密码",type:i.value,onKeyup:$(C,["enter","native"])},null,8,["modelValue","type"]),a("span",be,[e(k,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:x},null,8,["icon"])])]),_:1}),e(c,{trim:"",prop:"captcha_code"},{default:s(()=>[a("div",xe,[e(u,{size:"large",style:{width:"100%","border-radius":"8px"},placeholder:"验证码",modelValue:n.captcha_code,"onUpdate:modelValue":d[3]||(d[3]=S=>n.captcha_code=S),name:"captcha_code",class:"code-input",maxlength:"6",onKeyup:$(C,["enter","native"])},null,8,["modelValue"]),a("div",{class:"code-img",onClick:f,innerHTML:o.value},null,8,Ce)])]),_:1}),e(c,null,{default:s(()=>[e(I,{disabled:"",loading:y(g).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},onClick:U(C,["prevent"])},{default:s(()=>[p(" 注册功能暂未开放 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),a("div",ke,[Ve,e(L,{to:"/"},{default:s(()=>[p("服务条款")]),_:1}),Le,e(L,{to:"/"},{default:s(()=>[p("隐私政策")]),_:1})]),a("div",{class:"goBack",onClick:z},[e(L,{to:"/login"},{default:s(()=>[e(P,{size:18},{default:s(()=>[e(V)]),_:1}),p(" 返回 ")]),_:1})])],64)}}},$e=R(Se,[["__scopeId","data-v-a9a3d0e3"]]);const Ie={__name:"index",setup(l){const t=v(59),o=v(!1),_=H({mobile:"",sms_code:""}),n=v({mobile:[{required:!0,trigger:"blur",validator:se()}],sms_code:[{required:!0,trigger:"blur",validator:ne()}]}),b=v(null),i=F(),x=W();let h=null;const g=()=>{clearInterval(h),t.value=59,h=setInterval(()=>{t.value>0?t.value--:(clearInterval(h),o.value=!1)},1e3)},C=()=>{g(),b.value.validateField("mobile",async m=>{if(!m)return;o.value=!0;const[d,u]=await B.getSmsCode({mobile:_.mobile});d||(setTimeout(()=>{_.sms_code=u.data.code,o.value=!1},2e3),j.success("验证码已发送"))})},f=()=>{b.value.validate(m=>{m&&(i.commit("user/setLoadingState",!0),i.dispatch("user/mobileLogin",_).then(d=>{x.push("/"),i.commit("user/setLoadingState",!1)}).catch(d=>{console.log(d),i.commit("user/setLoadingState",!1)}))})},z=()=>{i.commit("user/setActiveState","login")};return(m,d)=>{const u=r("el-input"),c=r("el-form-item"),k=r("el-button"),I=r("el-form"),q=r("ArrowLeft"),L=r("el-icon"),V=r("router-link");return w(),E(K,null,[e(I,{ref_key:"loginFromRef",ref:b,style:{"max-width":"600px"},model:_,rules:n.value},{default:s(()=>[e(c,{prop:"mobile"},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:_.mobile,"onUpdate:modelValue":d[0]||(d[0]=P=>_.mobile=P),name:"mobile",placeholder:"手机号码",type:"text",onKeyup:$(f,["enter","native"])},null,8,["modelValue"])]),_:1}),e(c,{prop:"sms_code"},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:_.sms_code,"onUpdate:modelValue":d[1]||(d[1]=P=>_.sms_code=P),name:"sms_code",placeholder:"短信验证码",type:"text",onKeyup:$(f,["enter","native"])},null,8,["modelValue"]),a("div",{class:Z(["code",o.value?"active":""]),onClick:C},[o.value?(w(),A(k,{key:0,size:"large",plain:"",type:"info",disabled:""},{default:s(()=>[p(G(t.value)+"秒后重新获取",1)]),_:1})):(w(),A(k,{key:1,size:"large",plain:""},{default:s(()=>[p("发送验证码")]),_:1}))],2)]),_:1}),e(c,null,{default:s(()=>[o.value||_.mobile===""||_.sms_code===""?(w(),A(k,{key:0,disabled:"",loading:y(i).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:U(f,["prevent"])},{default:s(()=>[p(" 登录 ")]),_:1},8,["loading"])):(w(),A(k,{key:1,loading:y(i).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:U(f,["prevent"])},{default:s(()=>[p(" 登录 ")]),_:1},8,["loading"]))]),_:1})]),_:1},8,["model","rules"]),a("div",{class:"goBack",onClick:z},[e(V,{to:"/login"},{default:s(()=>[e(L,{size:18},{default:s(()=>[e(q)]),_:1}),p(" 返回 ")]),_:1})])],64)}}},ze=R(Ie,[["__scopeId","data-v-5b79f8c1"]]);const Pe=l=>(O("data-v-bf066704"),l=l(),D(),l),Me={class:"svgIcon"},Ae=Pe(()=>a("div",{class:"registrationTerms"},[a("span",null,"扫码点击 '确认'，即可完成登录")],-1)),Ee={__name:"index",setup(l){const t=F(),o=()=>{t.commit("user/setActiveState","login")};return(_,n)=>{const b=r("svg-icon"),i=r("ArrowLeft"),x=r("el-icon"),h=r("router-link");return w(),E(K,null,[a("div",Me,[e(b,{icon:"qr_code",size:"300",class:"qr_code"})]),Ae,a("div",{class:"goBack",onClick:o},[e(h,{to:"/login"},{default:s(()=>[e(x,{size:18},{default:s(()=>[e(i)]),_:1}),p(" 返回 ")]),_:1})])],64)}}},qe=R(Ee,[["__scopeId","data-v-bf066704"]]);const Re=l=>(O("data-v-94888a75"),l=l(),D(),l),Fe={class:"loginWrapper"},Te={class:"container"},Be=Re(()=>a("div",{class:"loginBanner"},[a("h1",null,"Vertex Admin"),a("div",{class:"bgImg"},[a("img",{src:ee})]),a("p",null,"qut-of-the-box mid-and back-end management system")],-1)),Ue={class:"loginContent"},Ke={key:0},Oe={class:"loginMethodWrapper"},De={class:"loginMethod"},He={class:"loginOtherMethod"},Ne={href:"#"},je={href:"#"},Qe={href:"#"},We={__name:"index",setup(l){const t=F(),o=v("登录"),_=()=>{i("register")},n=()=>{i("mobile")},b=()=>{i("qrCode")},i=g=>{t.commit("user/setActiveState",g)},x={register:"注册",mobile:"手机登录",qrCode:"二维码登录"},h=N(()=>o.value=x[t.getters.activeState]||"登录");return(g,C)=>{const f=r("el-button"),z=r("el-divider"),m=r("svg-icon");return w(),E("div",Fe,[a("div",Te,[Be,a("div",Ue,[a("h2",null,G(h.value),1),y(t).getters.activeState==="login"?(w(),E("div",Ke,[e(y(fe)),a("div",Oe,[a("div",De,[e(f,{size:"large",plain:"",onClick:n},{default:s(()=>[p("手机登录")]),_:1}),e(f,{size:"large",plain:"",onClick:b},{default:s(()=>[p("二维码登录")]),_:1}),e(f,{size:"large",plain:"",onClick:_},{default:s(()=>[p("注册")]),_:1})]),e(z,null,{default:s(()=>[p("其他登陆方式")]),_:1}),a("div",He,[a("a",Ne,[e(m,{class:"loginOtherIcon",icon:"github"})]),a("a",je,[e(m,{class:"loginOtherIcon",icon:"wechat"})]),a("a",Qe,[e(m,{class:"loginOtherIcon",icon:"google"})])])])])):T("",!0),y(t).getters.activeState==="register"?(w(),A(y($e),{key:1})):T("",!0),y(t).getters.activeState==="mobile"?(w(),A(y(ze),{key:2})):T("",!0),y(t).getters.activeState==="qrCode"?(w(),A(y(qe),{key:3})):T("",!0)])])])}}},Xe=R(We,[["__scopeId","data-v-94888a75"]]);export{Xe as default};
