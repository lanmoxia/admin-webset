import{_ as q,r as f,o as Q,a as N,u as R,b as W,c as j,d as T,e as r,f as h,g as A,h as a,i as e,w as s,j as m,k as $,l as x,m as B,F as K,E as U,p as O,n as D,q as Z,s as M,t as G,v as F}from"./index-dacd3bd5.js";import{m as J}from"./md5-cfb1f132.js";const ee=""+new URL("bg-img-63c403eb.png",import.meta.url).href,oe=()=>(l,t,o)=>{t.length===0?o(new Error("请输入密码")):t.length<6?o(new Error("密码不能少于6位")):o()},te=()=>(l,t,o)=>{t.length===0?o(new Error("请输入验证码")):t.length<2?o(new Error("验证码不能少于2位")):o()},se=()=>(l,t,o)=>{t.length===0?o(new Error("请输入手机号")):/^1[3-9]\d{9}$/.test(t)?o():o(new Error("手机号码格式不正确"))},ne=()=>(l,t,o)=>{t.length===0?o(new Error("请输入验证码")):t.length!==6?o(new Error("短信验证码格式不正确")):o()};const ae=l=>(O("data-v-e036d26b"),l=l(),D(),l),re={class:"testAccount"},le={class:"tipBox"},ie={class:"tipIcon"},de={class:"loginFrom"},ce={class:"showPassword"},ue={class:"code-box"},_e=["innerHTML"],pe={class:"rememberMe"},me=ae(()=>a("a",{href:""},"忘记密码?",-1)),ge={__name:"index",setup(l){const t=f(!0),o=f("");Q(async()=>{await p(),_(t.value)});const _=u=>{u?(n.username="supAdmin@gmail.com",n.password="demo1234",n.captcha_code=o.value):(n.username="",n.password="",n.captcha_code="")},n=N({username:"",password:"",captcha_code:"",code_key:""}),C=f({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",validator:oe()}],captcha_code:[{required:!0,trigger:"blur",validator:te()}]}),i=f("password"),w=()=>{i.value==="password"?i.value="text":i.value="password"},k=f(),g=R(),v=W(),y=j(()=>o.value.split("").map(u=>`<span style="color: ${V()}">${u}</span>`).join("")),V=()=>{const u=["#9ec7fd","#ea766d","#a4da94","#ff938b","#1d2940"];return u[Math.floor(Math.random()*u.length)]},c=()=>{k.value.validate(async u=>{if(g.commit("user/setLoadingState",!0),!u)return;if(n.captcha_code.toLowerCase()!==o.value.toLowerCase()){U.error("验证码错误！"),p();return}const d={username:n.username,password:J(n.password),captcha_code:n.captcha_code,code_key:n.code_key};await g.dispatch("user/login",d),v.push("/"),g.commit("user/setLoadingState",!1)})},p=async()=>{const[u,d]=await T.getCode();o.value=d.data.code,n.code_key=d.data.code_key,t.value&&(n.captcha_code=o.value)};return(u,d)=>{const z=r("svg-icon"),I=r("el-descriptions-item"),E=r("el-descriptions"),L=r("el-input"),b=r("el-form-item"),H=r("el-checkbox"),S=r("el-button"),Y=r("el-form");return h(),A(K,null,[a("div",re,[a("div",le,[a("div",ie,[e(z,{class:"icon",icon:"tipicon"})]),e(E,{column:1},{default:s(()=>[e(I,{label:"SupAdmin 账号:"},{default:s(()=>[m("supAdmin@gmail.com")]),_:1}),e(I,{label:"Admin 账号:"},{default:s(()=>[m("admin@gmail.com")]),_:1}),e(I,{label:"User 账号:"},{default:s(()=>[m("user1@gmail.com")]),_:1}),e(I,{label:"密码:"},{default:s(()=>[m("demo1234")]),_:1})]),_:1})])]),a("div",de,[e(Y,{ref_key:"loginFromRef",ref:k,style:{"max-width":"600px"},model:n,rules:C.value},{default:s(()=>[e(b,{prop:"username"},{default:s(()=>[e(L,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.username,"onUpdate:modelValue":d[0]||(d[0]=P=>n.username=P),name:"username",placeholder:"账号",type:"text",onKeyup:$(c,["enter","native"])},null,8,["modelValue"])]),_:1}),e(b,{prop:"password","label-suffix":""},{default:s(()=>[e(L,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.password,"onUpdate:modelValue":d[1]||(d[1]=P=>n.password=P),name:"password",placeholder:"密码",type:i.value,onKeyup:$(c,["enter","native"])},null,8,["modelValue","type"]),a("span",ce,[e(z,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:w},null,8,["icon"])])]),_:1}),e(b,{trim:"",prop:"captcha_code"},{default:s(()=>[a("div",ue,[e(L,{size:"large",style:{width:"100%","border-radius":"8px"},placeholder:"验证码",modelValue:n.captcha_code,"onUpdate:modelValue":d[2]||(d[2]=P=>n.captcha_code=P),name:"captcha_code",class:"code-input",maxlength:"2",onKeyup:$(c,["enter","native"])},null,8,["modelValue"]),a("div",{class:"code-img",onClick:p,innerHTML:y.value},null,8,_e)])]),_:1}),a("div",pe,[e(b,null,{default:s(()=>[e(H,{modelValue:t.value,"onUpdate:modelValue":d[3]||(d[3]=P=>t.value=P),onChange:_},{default:s(()=>[m("记住我")]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:s(()=>[me]),_:1})]),e(b,null,{default:s(()=>[e(S,{loading:x(g).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:B(c,["prevent"])},{default:s(()=>[m(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])],64)}}},fe=q(ge,[["__scopeId","data-v-e036d26b"]]),ve=()=>(l,t,o)=>{t.length===0?o(new Error("请输入密码")):t.length<6?o(new Error("密码不能少于6位")):o()},he=l=>(t,o,_)=>{o===""?_(new Error("请再次输入密码")):o!==l.password?_(new Error("两次输入的密码不一致")):_()},we=()=>(l,t,o)=>{t.length===0?o(new Error("请输入验证码")):t.length<2?o(new Error("验证码不能少于2位")):o()};const X=l=>(O("data-v-a9a3d0e3"),l=l(),D(),l),ye={class:"showPassword"},be={class:"showPassword"},xe={class:"code-box"},Ce=["innerHTML"],ke={class:"registrationTerms"},Ve=X(()=>a("span",null,"注册即我同意",-1)),Le=X(()=>a("span",null,"&",-1)),Se={__name:"index",setup(l){const t=f("");Q(()=>{y()});const o=j(()=>t.value.split("").map(c=>`<span style="color: ${_()}">${c}</span>`).join("")),_=()=>{const c=["#9ec7fd","#ea766d","#a4da94","#ff938b","#1d2940"];return c[Math.floor(Math.random()*c.length)]},n=N({username:"",password:"",confirmPassword:"",captcha_code:""}),C=f({username:[{required:!0,trigger:"blur",message:"请填写账号"}],password:[{required:!0,trigger:"blur",validator:ve()}],confirmPassword:[{required:!0,trigger:"blur",validator:he(n)}],captcha_code:[{required:!0,trigger:"blur",validator:we()}]}),i=f("password"),w=()=>{i.value==="password"?i.value="text":i.value="password"},k=f(),g=R(),v=()=>{k.value.validate(async c=>{if(!c)return;if(n.captcha_code.toLowerCase()!=t.value.toLowerCase()){y(),U.error("验证码错误！"),g.commit("user/setLoadingState",!1);return}g.commit("user/setLoadingState",!0);const p={...n,password:J(n.password)};g.commit("user/setLoadingState",!0);const[u,d]=await T.userRegister(p);u?(console.log(u),y(),g.commit("user/setLoadingState",!1)):(g.commit("user/setActiveState","login"),g.commit("user/setLoadingState",!1))})},y=async()=>{const[c,p]=await T.getCode();t.value=p.data.code},V=()=>{g.commit("user/setActiveState","login")};return(c,p)=>{const u=r("el-input"),d=r("el-form-item"),z=r("svg-icon"),I=r("el-button"),E=r("el-form"),L=r("router-link"),b=r("ArrowLeft"),H=r("el-icon");return h(),A(K,null,[e(E,{ref_key:"registerFromRef",ref:k,style:{"max-width":"600px"},model:n,rules:C.value},{default:s(()=>[e(d,{prop:"username"},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.username,"onUpdate:modelValue":p[0]||(p[0]=S=>n.username=S),name:"username",placeholder:"账号",type:"text",onKeyup:$(v,["enter","native"])},null,8,["modelValue"])]),_:1}),e(d,{prop:"password","label-suffix":""},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.password,"onUpdate:modelValue":p[1]||(p[1]=S=>n.password=S),name:"password",placeholder:"密码",type:i.value,onKeyup:$(v,["enter","native"])},null,8,["modelValue","type"]),a("span",ye,[e(z,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:w},null,8,["icon"])])]),_:1}),e(d,{prop:"confirmPassword","label-suffix":""},{default:s(()=>[e(u,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:n.confirmPassword,"onUpdate:modelValue":p[2]||(p[2]=S=>n.confirmPassword=S),name:"confirmPassword",placeholder:"确认密码",type:i.value,onKeyup:$(v,["enter","native"])},null,8,["modelValue","type"]),a("span",be,[e(z,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:w},null,8,["icon"])])]),_:1}),e(d,{trim:"",prop:"captcha_code"},{default:s(()=>[a("div",xe,[e(u,{size:"large",style:{width:"100%","border-radius":"8px"},placeholder:"验证码",modelValue:n.captcha_code,"onUpdate:modelValue":p[3]||(p[3]=S=>n.captcha_code=S),name:"captcha_code",class:"code-input",maxlength:"6",onKeyup:$(v,["enter","native"])},null,8,["modelValue"]),a("div",{class:"code-img",onClick:y,innerHTML:o.value},null,8,Ce)])]),_:1}),e(d,null,{default:s(()=>[e(I,{disabled:"",loading:x(g).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},onClick:B(v,["prevent"])},{default:s(()=>[m(" 注册功能暂未开放 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),a("div",ke,[Ve,e(L,{to:"/"},{default:s(()=>[m("服务条款")]),_:1}),Le,e(L,{to:"/"},{default:s(()=>[m("隐私政策")]),_:1})]),a("div",{class:"goBack",onClick:V},[e(L,{to:"/login"},{default:s(()=>[e(H,{size:18},{default:s(()=>[e(b)]),_:1}),m(" 返回 ")]),_:1})])],64)}}},$e=q(Se,[["__scopeId","data-v-a9a3d0e3"]]);const Ie={__name:"index",setup(l){const t=f(59),o=f(!1),_=N({mobile:"",sms_code:""}),n=f({mobile:[{required:!0,trigger:"blur",validator:se()}],sms_code:[{required:!0,trigger:"blur",validator:ne()}]}),C=f(null),i=R();W();let w=null;const k=()=>{clearInterval(w),t.value=59,w=setInterval(()=>{t.value>0?t.value--:(clearInterval(w),o.value=!1)},1e3)},g=()=>{k(),C.value.validateField("mobile",async V=>{if(!V)return;o.value=!0;const[c,p]=await T.getSmsCode({mobile:_.mobile});c||(setTimeout(()=>{_.sms_code=p.data.code,o.value=!1},2e3),U.success("验证码已发送"))})},v=()=>{C.value.validate(async V=>{V&&(i.commit("user/setLoadingState",!0),U.success("演示成功"),i.commit("user/setLoadingState",!1))})},y=()=>{i.commit("user/setActiveState","login")};return(V,c)=>{const p=r("el-input"),u=r("el-form-item"),d=r("el-button"),z=r("el-form"),I=r("ArrowLeft"),E=r("el-icon"),L=r("router-link");return h(),A(K,null,[e(z,{ref_key:"loginFromRef",ref:C,style:{"max-width":"600px"},model:_,rules:n.value},{default:s(()=>[e(u,{prop:"mobile"},{default:s(()=>[e(p,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:_.mobile,"onUpdate:modelValue":c[0]||(c[0]=b=>_.mobile=b),name:"mobile",placeholder:"手机号码",type:"text",onKeyup:$(v,["enter","native"])},null,8,["modelValue"])]),_:1}),e(u,{prop:"sms_code"},{default:s(()=>[e(p,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:_.sms_code,"onUpdate:modelValue":c[1]||(c[1]=b=>_.sms_code=b),name:"sms_code",placeholder:"短信验证码",type:"text",onKeyup:$(v,["enter","native"])},null,8,["modelValue"]),a("div",{class:Z(["code",o.value?"active":""]),onClick:g},[o.value?(h(),M(d,{key:0,size:"large",plain:"",type:"info",disabled:""},{default:s(()=>[m(G(t.value)+"秒后重新获取",1)]),_:1})):(h(),M(d,{key:1,size:"large",plain:""},{default:s(()=>[m("发送验证码")]),_:1}))],2)]),_:1}),e(u,null,{default:s(()=>[o.value||_.mobile===""||_.sms_code===""?(h(),M(d,{key:0,disabled:"",loading:x(i).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:B(v,["prevent"])},{default:s(()=>[m(" 登录 ")]),_:1},8,["loading"])):(h(),M(d,{key:1,loading:x(i).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:B(v,["prevent"])},{default:s(()=>[m(" 登录 ")]),_:1},8,["loading"]))]),_:1})]),_:1},8,["model","rules"]),a("div",{class:"goBack",onClick:y},[e(L,{to:"/login"},{default:s(()=>[e(E,{size:18},{default:s(()=>[e(I)]),_:1}),m(" 返回 ")]),_:1})])],64)}}},ze=q(Ie,[["__scopeId","data-v-cb195308"]]);const Pe=l=>(O("data-v-bf066704"),l=l(),D(),l),Me={class:"svgIcon"},Ae=Pe(()=>a("div",{class:"registrationTerms"},[a("span",null,"扫码点击 '确认'，即可完成登录")],-1)),Ee={__name:"index",setup(l){const t=R(),o=()=>{t.commit("user/setActiveState","login")};return(_,n)=>{const C=r("svg-icon"),i=r("ArrowLeft"),w=r("el-icon"),k=r("router-link");return h(),A(K,null,[a("div",Me,[e(C,{icon:"qr_code",size:"300",class:"qr_code"})]),Ae,a("div",{class:"goBack",onClick:o},[e(k,{to:"/login"},{default:s(()=>[e(w,{size:18},{default:s(()=>[e(i)]),_:1}),m(" 返回 ")]),_:1})])],64)}}},qe=q(Ee,[["__scopeId","data-v-bf066704"]]);const Re=l=>(O("data-v-94888a75"),l=l(),D(),l),Fe={class:"loginWrapper"},Te={class:"container"},Be=Re(()=>a("div",{class:"loginBanner"},[a("h1",null,"Vertex Admin"),a("div",{class:"bgImg"},[a("img",{src:ee})]),a("p",null,"qut-of-the-box mid-and back-end management system")],-1)),Ue={class:"loginContent"},Ke={key:0},Oe={class:"loginMethodWrapper"},De={class:"loginMethod"},He={class:"loginOtherMethod"},Ne={href:"#"},je={href:"#"},Qe={href:"#"},We={__name:"index",setup(l){const t=R(),o=f("登录"),_=()=>{i("register")},n=()=>{i("mobile")},C=()=>{i("qrCode")},i=g=>{t.commit("user/setActiveState",g)},w={register:"注册",mobile:"手机登录",qrCode:"二维码登录"},k=j(()=>o.value=w[t.getters.activeState]||"登录");return(g,v)=>{const y=r("el-button"),V=r("el-divider"),c=r("svg-icon");return h(),A("div",Fe,[a("div",Te,[Be,a("div",Ue,[a("h2",null,G(k.value),1),x(t).getters.activeState==="login"?(h(),A("div",Ke,[e(x(fe)),a("div",Oe,[a("div",De,[e(y,{size:"large",plain:"",onClick:n},{default:s(()=>[m("手机登录")]),_:1}),e(y,{size:"large",plain:"",onClick:C},{default:s(()=>[m("二维码登录")]),_:1}),e(y,{size:"large",plain:"",onClick:_},{default:s(()=>[m("注册")]),_:1})]),e(V,null,{default:s(()=>[m("其他登陆方式")]),_:1}),a("div",He,[a("a",Ne,[e(c,{class:"loginOtherIcon",icon:"github"})]),a("a",je,[e(c,{class:"loginOtherIcon",icon:"wechat"})]),a("a",Qe,[e(c,{class:"loginOtherIcon",icon:"google"})])])])])):F("",!0),x(t).getters.activeState==="register"?(h(),M(x($e),{key:1})):F("",!0),x(t).getters.activeState==="mobile"?(h(),M(x(ze),{key:2})):F("",!0),x(t).getters.activeState==="qrCode"?(h(),M(x(qe),{key:3})):F("",!0)])])])}}},Xe=q(We,[["__scopeId","data-v-94888a75"]]);export{Xe as default};
