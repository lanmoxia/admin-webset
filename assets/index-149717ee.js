import{_ as R,r as v,o as Q,a as H,u as F,b as W,c as N,d as B,e as a,f as w,g as E,h as n,i as e,w as t,j as p,k as $,l as y,m as U,F as K,E as j,p as O,n as D,q as Z,s as A,t as G,v as T}from"./index-ddcfb16c.js";import{m as J}from"./md5-250e0a6b.js";const ee=""+new URL("bg-img-63c403eb.png",import.meta.url).href,oe=()=>(l,s,o)=>{s.length===0?o(new Error("请输入密码")):s.length<6?o(new Error("密码不能少于6位")):o()},te=()=>(l,s,o)=>{s.length===0?o(new Error("请输入验证码")):s.length<2?o(new Error("验证码不能少于2位")):o()},se=()=>(l,s,o)=>{s.length===0?o(new Error("请输入手机号")):/^1[3-9]\d{9}$/.test(s)?o():o(new Error("手机号码格式不正确"))},ne=()=>(l,s,o)=>{s.length===0?o(new Error("请输入验证码")):s.length!==6?o(new Error("短信验证码格式不正确")):o()};const re=l=>(O("data-v-122585f2"),l=l(),D(),l),ae={class:"testAccount"},le={class:"tipBox"},ie={class:"tipIcon"},de={class:"loginFrom"},ce={class:"showPassword"},ue={class:"code-box"},_e=["innerHTML"],me={class:"rememberMe"},pe=re(()=>n("a",{href:""},"忘记密码?",-1)),ge={__name:"index",setup(l){const s=v(!0),o=v("");Q(async()=>{await d(),_(s.value)});const _=c=>{c?(r.username="supAdmin@gmail.com",r.password="demo1234",r.captcha_code=o.value):(r.username="",r.password="",r.captcha_code="")},r=H({username:"",password:"",captcha_code:""}),b=v({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",validator:oe()}],captcha_code:[{required:!0,trigger:"blur",validator:te()}]}),i=v("password"),x=()=>{i.value==="password"?i.value="text":i.value="password"},h=v(),g=F(),C=W(),f=N(()=>o.value.split("").map(c=>`<span style="color: ${z()}">${c}</span>`).join("")),z=()=>{const c=["#9ec7fd","#ea766d","#a4da94","#ff938b","#1d2940"];return c[Math.floor(Math.random()*c.length)]},m=()=>{h.value.validate(async c=>{if(g.commit("user/setLoadingState",!0),!c)return;if(r.captcha_code.toLowerCase()!==o.value.toLowerCase()){j.error("验证码错误！"),d();return}const u={...r,password:J(r.password)};await g.dispatch("user/login",u),C.push("/"),g.commit("user/setLoadingState",!1)})},d=async()=>{const[c,u]=await B.getCode();o.value=u.data.code,r.captcha_code=o.value};return(c,u)=>{const V=a("svg-icon"),I=a("el-descriptions-item"),q=a("el-descriptions"),k=a("el-input"),L=a("el-form-item"),P=a("el-checkbox"),S=a("el-button"),Y=a("el-form");return w(),E(K,null,[n("div",ae,[n("div",le,[n("div",ie,[e(V,{class:"icon",icon:"tipicon"})]),e(q,{column:1},{default:t(()=>[e(I,{label:"SupAdmin 账号:"},{default:t(()=>[p("supAdmin@gmail.com")]),_:1}),e(I,{label:"Admin 账号:"},{default:t(()=>[p("admin@gmail.com")]),_:1}),e(I,{label:"User 账号:"},{default:t(()=>[p("user1@gmail.com")]),_:1}),e(I,{label:"密码:"},{default:t(()=>[p("demo1234")]),_:1})]),_:1})])]),n("div",de,[e(Y,{ref_key:"loginFromRef",ref:h,style:{"max-width":"600px"},model:r,rules:b.value},{default:t(()=>[e(L,{prop:"username"},{default:t(()=>[e(k,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:r.username,"onUpdate:modelValue":u[0]||(u[0]=M=>r.username=M),name:"username",placeholder:"账号",type:"text",onKeyup:$(m,["enter","native"])},null,8,["modelValue"])]),_:1}),e(L,{prop:"password","label-suffix":""},{default:t(()=>[e(k,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:r.password,"onUpdate:modelValue":u[1]||(u[1]=M=>r.password=M),name:"password",placeholder:"密码",type:i.value,onKeyup:$(m,["enter","native"])},null,8,["modelValue","type"]),n("span",ce,[e(V,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:x},null,8,["icon"])])]),_:1}),e(L,{trim:"",prop:"captcha_code"},{default:t(()=>[n("div",ue,[e(k,{size:"large",style:{width:"100%","border-radius":"8px"},placeholder:"验证码",modelValue:r.captcha_code,"onUpdate:modelValue":u[2]||(u[2]=M=>r.captcha_code=M),name:"captcha_code",class:"code-input",maxlength:"2",onKeyup:$(m,["enter","native"])},null,8,["modelValue"]),n("div",{class:"code-img",onClick:d,innerHTML:f.value},null,8,_e)])]),_:1}),n("div",me,[e(L,null,{default:t(()=>[e(P,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=M=>s.value=M),onChange:_},{default:t(()=>[p("记住我")]),_:1},8,["modelValue"])]),_:1}),e(L,null,{default:t(()=>[pe]),_:1})]),e(L,null,{default:t(()=>[e(S,{loading:y(g).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:U(m,["prevent"])},{default:t(()=>[p(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])],64)}}},fe=R(ge,[["__scopeId","data-v-122585f2"]]),ve=()=>(l,s,o)=>{s.length===0?o(new Error("请输入密码")):s.length<6?o(new Error("密码不能少于6位")):o()},he=l=>(s,o,_)=>{o===""?_(new Error("请再次输入密码")):o!==l.password?_(new Error("两次输入的密码不一致")):_()},we=()=>(l,s,o)=>{s.length===0?o(new Error("请输入验证码")):s.length<2?o(new Error("验证码不能少于2位")):o()};const X=l=>(O("data-v-a9a3d0e3"),l=l(),D(),l),ye={class:"showPassword"},be={class:"showPassword"},xe={class:"code-box"},Ce=["innerHTML"],Ve={class:"registrationTerms"},Le=X(()=>n("span",null,"注册即我同意",-1)),ke=X(()=>n("span",null,"&",-1)),Se={__name:"index",setup(l){const s=v("");Q(()=>{f()});const o=N(()=>s.value.split("").map(m=>`<span style="color: ${_()}">${m}</span>`).join("")),_=()=>{const m=["#9ec7fd","#ea766d","#a4da94","#ff938b","#1d2940"];return m[Math.floor(Math.random()*m.length)]},r=H({username:"",password:"",confirmPassword:"",captcha_code:""}),b=v({username:[{required:!0,trigger:"blur",message:"请填写账号"}],password:[{required:!0,trigger:"blur",validator:ve()}],confirmPassword:[{required:!0,trigger:"blur",validator:he(r)}],captcha_code:[{required:!0,trigger:"blur",validator:we()}]}),i=v("password"),x=()=>{i.value==="password"?i.value="text":i.value="password"},h=v(),g=F(),C=()=>{h.value.validate(async m=>{if(!m)return;if(r.captcha_code.toLowerCase()!=s.value.toLowerCase()){f(),j.error("验证码错误！"),g.commit("user/setLoadingState",!1);return}g.commit("user/setLoadingState",!0);const d={...r,password:J(r.password)};g.commit("user/setLoadingState",!0);const[c,u]=await B.userRegister(d);c?(console.log(c),f(),g.commit("user/setLoadingState",!1)):(g.commit("user/setActiveState","login"),g.commit("user/setLoadingState",!1))})},f=async()=>{const[m,d]=await B.getCode();s.value=d.data.code},z=()=>{g.commit("user/setActiveState","login")};return(m,d)=>{const c=a("el-input"),u=a("el-form-item"),V=a("svg-icon"),I=a("el-button"),q=a("el-form"),k=a("router-link"),L=a("ArrowLeft"),P=a("el-icon");return w(),E(K,null,[e(q,{ref_key:"registerFromRef",ref:h,style:{"max-width":"600px"},model:r,rules:b.value},{default:t(()=>[e(u,{prop:"username"},{default:t(()=>[e(c,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:r.username,"onUpdate:modelValue":d[0]||(d[0]=S=>r.username=S),name:"username",placeholder:"账号",type:"text",onKeyup:$(C,["enter","native"])},null,8,["modelValue"])]),_:1}),e(u,{prop:"password","label-suffix":""},{default:t(()=>[e(c,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:r.password,"onUpdate:modelValue":d[1]||(d[1]=S=>r.password=S),name:"password",placeholder:"密码",type:i.value,onKeyup:$(C,["enter","native"])},null,8,["modelValue","type"]),n("span",ye,[e(V,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:x},null,8,["icon"])])]),_:1}),e(u,{prop:"confirmPassword","label-suffix":""},{default:t(()=>[e(c,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:r.confirmPassword,"onUpdate:modelValue":d[2]||(d[2]=S=>r.confirmPassword=S),name:"confirmPassword",placeholder:"确认密码",type:i.value,onKeyup:$(C,["enter","native"])},null,8,["modelValue","type"]),n("span",be,[e(V,{class:"svgIcon",icon:i.value==="password"?"eye":"eye-open",onClick:x},null,8,["icon"])])]),_:1}),e(u,{trim:"",prop:"captcha_code"},{default:t(()=>[n("div",xe,[e(c,{size:"large",style:{width:"100%","border-radius":"8px"},placeholder:"验证码",modelValue:r.captcha_code,"onUpdate:modelValue":d[3]||(d[3]=S=>r.captcha_code=S),name:"captcha_code",class:"code-input",maxlength:"6",onKeyup:$(C,["enter","native"])},null,8,["modelValue"]),n("div",{class:"code-img",onClick:f,innerHTML:o.value},null,8,Ce)])]),_:1}),e(u,null,{default:t(()=>[e(I,{disabled:"",loading:y(g).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},onClick:U(C,["prevent"])},{default:t(()=>[p(" 注册功能暂未开放 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),n("div",Ve,[Le,e(k,{to:"/"},{default:t(()=>[p("服务条款")]),_:1}),ke,e(k,{to:"/"},{default:t(()=>[p("隐私政策")]),_:1})]),n("div",{class:"goBack",onClick:z},[e(k,{to:"/login"},{default:t(()=>[e(P,{size:18},{default:t(()=>[e(L)]),_:1}),p(" 返回 ")]),_:1})])],64)}}},$e=R(Se,[["__scopeId","data-v-a9a3d0e3"]]);const Ie={__name:"index",setup(l){const s=v(59),o=v(!1),_=H({mobile:"",sms_code:""}),r=v({mobile:[{required:!0,trigger:"blur",validator:se()}],sms_code:[{required:!0,trigger:"blur",validator:ne()}]}),b=v(null),i=F(),x=W();let h=null;const g=()=>{clearInterval(h),s.value=59,h=setInterval(()=>{s.value>0?s.value--:(clearInterval(h),o.value=!1)},1e3)},C=()=>{g(),b.value.validateField("mobile",async m=>{if(!m)return;o.value=!0;const[d,c]=await B.getSmsCode({mobile:_.mobile});d||(setTimeout(()=>{_.sms_code=c.data.code,o.value=!1},2e3),j.success("验证码已发送"))})},f=()=>{b.value.validate(m=>{m&&(i.commit("user/setLoadingState",!0),i.dispatch("user/mobileLogin",_).then(d=>{x.push("/"),i.commit("user/setLoadingState",!1)}).catch(d=>{console.log(d),i.commit("user/setLoadingState",!1)}))})},z=()=>{i.commit("user/setActiveState","login")};return(m,d)=>{const c=a("el-input"),u=a("el-form-item"),V=a("el-button"),I=a("el-form"),q=a("ArrowLeft"),k=a("el-icon"),L=a("router-link");return w(),E(K,null,[e(I,{ref_key:"loginFromRef",ref:b,style:{"max-width":"600px"},model:_,rules:r.value},{default:t(()=>[e(u,{prop:"mobile"},{default:t(()=>[e(c,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:_.mobile,"onUpdate:modelValue":d[0]||(d[0]=P=>_.mobile=P),name:"mobile",placeholder:"手机号码",type:"text",onKeyup:$(f,["enter","native"])},null,8,["modelValue"])]),_:1}),e(u,{prop:"sms_code"},{default:t(()=>[e(c,{trim:"",size:"large",style:{width:"100%","border-radius":"8px"},modelValue:_.sms_code,"onUpdate:modelValue":d[1]||(d[1]=P=>_.sms_code=P),name:"sms_code",placeholder:"短信验证码",type:"text",onKeyup:$(f,["enter","native"])},null,8,["modelValue"]),n("div",{class:Z(["code",o.value?"active":""]),onClick:C},[o.value?(w(),A(V,{key:0,size:"large",plain:"",type:"info",disabled:""},{default:t(()=>[p(G(s.value)+"秒后重新获取",1)]),_:1})):(w(),A(V,{key:1,size:"large",plain:""},{default:t(()=>[p("发送验证码")]),_:1}))],2)]),_:1}),e(u,null,{default:t(()=>[o.value||_.mobile===""||_.sms_code===""?(w(),A(V,{key:0,disabled:"",loading:y(i).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:U(f,["prevent"])},{default:t(()=>[p(" 登录 ")]),_:1},8,["loading"])):(w(),A(V,{key:1,loading:y(i).getters.isLoading,size:"large",style:{width:"100%","border-radius":"8px"},type:"primary",onClick:U(f,["prevent"])},{default:t(()=>[p(" 登录 ")]),_:1},8,["loading"]))]),_:1})]),_:1},8,["model","rules"]),n("div",{class:"goBack",onClick:z},[e(L,{to:"/login"},{default:t(()=>[e(k,{size:18},{default:t(()=>[e(q)]),_:1}),p(" 返回 ")]),_:1})])],64)}}},ze=R(Ie,[["__scopeId","data-v-5b79f8c1"]]);const Pe=l=>(O("data-v-bf066704"),l=l(),D(),l),Me={class:"svgIcon"},Ae=Pe(()=>n("div",{class:"registrationTerms"},[n("span",null,"扫码点击 '确认'，即可完成登录")],-1)),Ee={__name:"index",setup(l){const s=F(),o=()=>{s.commit("user/setActiveState","login")};return(_,r)=>{const b=a("svg-icon"),i=a("ArrowLeft"),x=a("el-icon"),h=a("router-link");return w(),E(K,null,[n("div",Me,[e(b,{icon:"qr_code",size:"300",class:"qr_code"})]),Ae,n("div",{class:"goBack",onClick:o},[e(h,{to:"/login"},{default:t(()=>[e(x,{size:18},{default:t(()=>[e(i)]),_:1}),p(" 返回 ")]),_:1})])],64)}}},qe=R(Ee,[["__scopeId","data-v-bf066704"]]);const Re=l=>(O("data-v-94888a75"),l=l(),D(),l),Fe={class:"loginWrapper"},Te={class:"container"},Be=Re(()=>n("div",{class:"loginBanner"},[n("h1",null,"Vertex Admin"),n("div",{class:"bgImg"},[n("img",{src:ee})]),n("p",null,"qut-of-the-box mid-and back-end management system")],-1)),Ue={class:"loginContent"},Ke={key:0},Oe={class:"loginMethodWrapper"},De={class:"loginMethod"},He={class:"loginOtherMethod"},Ne={href:"#"},je={href:"#"},Qe={href:"#"},We={__name:"index",setup(l){const s=F(),o=v("登录"),_=()=>{i("register")},r=()=>{i("mobile")},b=()=>{i("qrCode")},i=g=>{s.commit("user/setActiveState",g)},x={register:"注册",mobile:"手机登录",qrCode:"二维码登录"},h=N(()=>o.value=x[s.getters.activeState]||"登录");return(g,C)=>{const f=a("el-button"),z=a("el-divider"),m=a("svg-icon");return w(),E("div",Fe,[n("div",Te,[Be,n("div",Ue,[n("h2",null,G(h.value),1),y(s).getters.activeState==="login"?(w(),E("div",Ke,[e(y(fe)),n("div",Oe,[n("div",De,[e(f,{size:"large",plain:"",onClick:r},{default:t(()=>[p("手机登录")]),_:1}),e(f,{size:"large",plain:"",onClick:b},{default:t(()=>[p("二维码登录")]),_:1}),e(f,{size:"large",plain:"",onClick:_},{default:t(()=>[p("注册")]),_:1})]),e(z,null,{default:t(()=>[p("其他登陆方式")]),_:1}),n("div",He,[n("a",Ne,[e(m,{class:"loginOtherIcon",icon:"github"})]),n("a",je,[e(m,{class:"loginOtherIcon",icon:"wechat"})]),n("a",Qe,[e(m,{class:"loginOtherIcon",icon:"google"})])])])])):T("",!0),y(s).getters.activeState==="register"?(w(),A(y($e),{key:1})):T("",!0),y(s).getters.activeState==="mobile"?(w(),A(y(ze),{key:2})):T("",!0),y(s).getters.activeState==="qrCode"?(w(),A(y(qe),{key:3})):T("",!0)])])])}}},Xe=R(We,[["__scopeId","data-v-94888a75"]]);export{Xe as default};
